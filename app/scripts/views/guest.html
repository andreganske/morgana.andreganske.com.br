<div id="header" ng-include="'app/scripts/views/header.html'"></div>

<div class="row">
	<div class="col-md-3 col-md-offset-8">
		<div class="form-group">
			<label for="search_label">Busca</label>
			<input type="search" ng-model="q" placeholder="filtrar" class="form-control" id="search_label"/>					
		</div>
	</div>
</div>

<div class="row">
	<div class="col-md-10 col-md-offset-1">
		<accordion close-others="true" id="guest-products">
			<accordion-group heading="Eletro / Eletrônicos">
				<table class="table table-striped">
					<tbody>
						<tr ng-repeat="product in products | category: 'eletro' | filter:q as results" ng-class="{success: product.available}" ng-click="selectItem(product)">
							<th class="col-md-4">{{product.name}}</th>
							<th class="col-md-8">{{product.description}}</th>
						</tr>
					</tbody>
				</table>
			</accordion-group>

			<accordion-group heading="Cama, mesa e banho">
				<table class="table table-striped">
					<tbody>
						<tr ng-repeat="product in products | category: 'kitchen' | filter:q as results" ng-class="{success: product.available}" ng-click="selectItem(product)">
							<th class="col-md-4">{{product.name}}</th>
							<th class="col-md-8">{{product.description}}</th>
						</tr>
					</tbody>
				</table>
			</accordion-group>

			<accordion-group heading="Utilidades domésticas">
				<table class="table table-striped">
					<tbody>
						<tr ng-repeat="product in products | category: 'utilities' | filter:q as results" ng-class="{success: product.available}" ng-click="selectItem(product)">
							<th class="col-md-4">{{product.name}}</th>
							<th class="col-md-8">{{product.description}}</th>
						</tr>
					</tbody>
				</table>
			</accordion-group>

			<accordion-group heading="Decoração">
				<table class="table table-striped">
					<tbody>
						<tr ng-repeat="product in products | category: 'decor' | filter:q as results" ng-class="{success: product.available}" ng-click="selectItem(product)">
							<th class="col-md-4">{{product.name}}</th>
							<th class="col-md-8">{{product.description}}</th>
						</tr>
					</tbody>
				</table>
			</accordion-group>

			<accordion-group heading="Outros">
				<table class="table table-striped">
					<tbody>
						<tr ng-repeat="product in products | category: 'others' | filter:q as results" ng-class="{success: product.available}" ng-click="selectItem(product)">
							<th class="col-md-4">{{product.name}}</th>
							<th class="col-md-8">{{product.description}}</th>
						</tr>
					</tbody>
				</table>
			</accordion-group>
		</accordion>

		<toaster-container toaster-options="{'position-class': 'toast-top-right', 'close-button': 'true'}"></toaster-container>

	</div>
</div>

<script type="text/ng-template" id="selectItem.html">

    <div class="modal-header">
        <h4 class="modal-title">Registrar</h4>
    </div>
    
    <div class="modal-body">
    	<form name="form" novalidate>
	      	<div class="form-group">
	      		<h5>Você selecionou: <strong>{{item}}</strong></h5>
	      	</div>

			<div class="alert alert-danger" role="alert" id="formError" style="display: none;">
				<button type="button" class="close" data-dismiss="alert" aria-label="Fechar"><span aria-hidden="true">×</span></button>
				<strong>Ops!</strong> Parece que você não preenchou o formulário corretamente. Por favor, nos diga seu nome completo e seu telefone. Se possível, seu email também. Obrigado :)
			</div>

	        <div class="form-group">
	        	<label for="name">Nome completo *</label>
	        	<input type="text" class="form-control" name="name" ng-model="fullname" placeholder="Seu nome completo" required>

	        	<div ng-show="form.$submitted || form.name.$touched">
	        		<div ng-show="form.name.$error.required">Por favor, preecha o seu nome :)</div>
	        	</div>
	        </div>

	        <div class="form-group">
	        	<label for="email">Email</label>
	        	<input type="email" class="form-control" name="email" ng-model="email" placeholder="meuemail@meuemail.com.br">

	        	<div ng-show="form.$submitted">
	        		<span ng-show="form.email.$error.email">This is not a valid email.</span>
	        	</div>
	        </div>

	        <div class="form-group">
	        	<label for="phone">Telefone * <small>(somente números)</small></label>
	        	<input type="text" ui-mask="999 9999 9999" class="form-control" name="phone" ng-model="phone" required>

	        	<div ng-show="form.$submitted || form.phone.$touched">
	        		<div ng-show="form.phone.$error.required">Por favor, preecha o seu telefone :)</div>
	        	</div>
	        </div>

	        <div class="form-group">
	        	<p class="text-right">Campos com * são obrigatórios</p>
	        </div>
		</form>
    </div>

    <div class="modal-footer">
        <input type="button" class="btn btn-primary" ng-click="validadeForm()" value="Confirmar">
        <input type="button" class="btn btn-default" ng-click="cancel()" value="Cancelar">
    </div>
</script>